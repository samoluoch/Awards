{%extends 'base.html'%}
{% load bootstrap3 %}
{% block content %}

<style>
.blue-button{
    width: 100px;
    -webkit-transition: background-color 1s , color 1s; /* For Safari 3.1 to 6.0 */
    transition: background-color 1s , color 1s;
    min-height: 20px;
    background-color: #002E5B;
    color: #ffffff;
    border-radius: 4px;
    text-align: center;
    font-weight: lighter;
    margin: 0px 20px 15px 20px;
    padding: 5px 0px;
    display: inline-block;
}
.blue-button:hover{
    background-color: #dadada;
    color: #002E5B;
}</style>
<h2 id="home-header">Project Reviews</h2>



{% for project in projects %}
<div class="container-fluid" style="background-color: #F7F7F7; margin-top: -20px;">
    <div class="row">
        <br><br>
        <div class="col-xs-8 col-sm-6 col-md-6 col-lg-6">

            <h5 style="color: black;" class="col-xs-4 col-sm-4 col-md-4 col-lg-4"><b><i>{{image.profile}}</i></b></h5>
            <button type="button" data-toggle="modal" data-target="#myModal{{project.id}}">

            <img class="well" src="{{project.image.url}}"  width='500' height='500' alt="" class="col-xs-10 col-sm-10 col-md-10 col-lg-10" style="backgrounds-color: white;">
                </button>
            <h5><b>Title:</b> {{project.title}}</h5>
            <h5><b>Posted By:</b> {{project.profile}}</h5>
            <h5><b>Description:</b> {{project.description}}</h5>
            <h5><b>Submitted:</b> {{project.pub_date|timesince}} ago</h5>
            <h5><b>URL:</b> {{project.url}}</h5>
            <a href="{{project.url}}" class="blue-button">Visit site</a>
<h5>{{ project.rating.count }} Design  ({{ project.average_design | floatformat }} average rating)</h5>
{% for review in project.designrating_set.all %}
            <ul>{{review.comment}}</ul>
            {% endfor %}
<h5>{{ project.rating.count }} Usability  ({{ project.average_usability | floatformat }} average rating)</h5>

<h5>{{ project.rating.count }} Content  ({{ project.average_content | floatformat }} average rating)</h5>

<!--Rating-->
        </div>


        <br><br>
        <h4>Rate By Design</h4>
        <div class="col-xs-4 col-sm-6 col-md-6 col-lg-6">


              <form  action="{%url 'add_design' project_id=project.id %}" method="POST">
    {%csrf_token%}
    {% bootstrap_form form layout='inline' %}
    <input type="submit" value="Subscribe">
  </form>
            <h4>Rate By Content</h4>
  <form  action="{%url 'review_content' project_id=project.id %}" method="POST">
    {%csrf_token%}
    {% bootstrap_form form layout='inline' %}
    <input type="submit" value="Subscribe">
  </form>
             <h4>Rate By Usability</h4>
              <form  action="{%url 'review_usability' project_id=project.id %}" method="POST">
    {%csrf_token%}
    {% bootstrap_form form layout='inline' %}
    <input type="submit" value="Subscribe">
  </form>


        </div>

        <!--End Rating-->
    </div>
</div>
{% endfor %}

{% for project in projects %}
<!-- modal content -->
<div class="modal fade" id="myModal{{project.id}}" role="dialog" class="col-xs-10 col-sm-10 col-md-10 col-lg-10">
   <div class="modal-dialog">

       <div class="modal-content">
           <div class="modal-header">
               <button type="button" class="close" data-dismiss="modal">&times;</button>

               <h4 class="modal-title">{{ project.name }}</h4>
           </div>

           <div class="modal-body" class="col-xs-10 col-sm-6 col-md-6 col-lg-6">
                              <img src="{{project.image.url }}" alt="" width="500" height="500">

           </div>


           <div class="modal-footer" class="well" class="jumbotron">
               <h3>Image Details</h3>
               <h5 style="color: green;">{{project.pub_date|timesince}} ago</h5>
                <h5 style="color: green;"><b>Posted By:</b> {{project.profile}}</h5>
                <h5 style="color: green;"><b>Title:</b> {{project.title}}</h5>
                <h5 style="color: green;"><b>Description:</b> {{project.description}}</h5>

           </div>
   </div>
</div>
   </div>


<!--Start Rating-->
<div class="d-flex justify-content-center mt-3 mb-5">
                   <div class="mx-2 ratings">
                       <div class="circle border-red text-center d-flex align-items-center justify-content-center">
                           <div class="text-white">
                               <span class="int font-weight-bold">{{ average_design_w }}</span>
                               <span class="dec">.{{ average_design_d }}</span>
                           </div>
                       </div>
                       <div class="p-2 text-center">
                           <h2 class="light-grey f-12">DESIGN</h2>
                       </div>
                   </div>
                   <div class="mx-2 ratings">
                       <div class="circle border-warning text-center d-flex align-items-center justify-content-center">
                           <div class="text-white">
                               <span class="int font-weight-bold">{{ average_usability_w }}</span>
                               <span class="dec">.{{ average_usability_d }}</span>
                           </div>
                       </div>
                       <div class="p-2 text-center">
                           <h2 class="light-grey f-12">USABILITY</h2>
                       </div>
                   </div>

                   <div class="mx-2 ratings">
                       <div class="circle border-info text-center d-flex align-items-center justify-content-center">
                           <div class="text-white">
                               <span class="int font-weight-bold">{{ average_content_w }}</span>
                               <span class="dec">.{{ average_content_d }}</span>
                           </div>
                       </div>
                       <div class="p-2 text-center">
                           <h2 class="light-grey f-12">CONTENT</h2>
                       </div>
                   </div>

               </div>

<!--End of rating-->






{% endfor %}



{%endblock%}


       {% block scripts %} {{block.super}}
       {% load static %}
  <script type="text/javascript" src="{%static 'js/newsletter.js'%}"></script>
{% endblock %}


       <!--<h5 class="displaying comments on an image"><br><br><b>Comments:</b>-->
                <!--<a class="view-more"></a>-->
                          <!--{% for comment in image.comments_set.all %}-->
                            <!--<li class="comment-list__comment">-->
                              <!--<a href="{% url 'profile' username=comment.profile.username }" class="user">-->
                                <!--{{ comment.user.username }}-->
                              <!--</a>-->
                              <!--<span class="comment">{{ comment.comment }}</span>-->
                            <!--</li>-->
                          <!--{% endfor %}-->



                            <!--{% if request.user.is_authenticated %}-->
                          <!--<section class="input-row">-->
                            <!--<i class="fa # submit-like" aria-hidden="true"></i>-->
                            <!--<div class="comment-input-wrapper">-->
                                <!--<form action="{% url 'comment' image_id=image.id %}" method="post">-->
                                    <!--{% csrf_token %}-->
                                    <!--<input class="add-comment" name="comment" id="comment{{image.id}}" type="text" placeholder="Comment on this image....">-->

                                <!--</form>-->
                            <!--</div>-->
                            <!--<div class="hidden-data {{ image.pk }}" style="display: none;">-->
                              <!--<span class="image-pk">{{ image.pk }}</span>-->
                            <!--</div>-->
                          <!--</section>-->
                        <!--{% endif %}-->
            <!--</h5>-->